<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<title>Class12</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=1274, user-scalable=no">
	<meta name="description" content="Class12">
	<meta name="author" content="Yu-Ru Lin">
	<meta name="generator" content="slidify" />
	<!-- LOAD STYLE SHEETS -->
	<link rel="stylesheet" href="libraries/frameworks/shower/themes/ribbon/styles/screen.css">
	<link rel="stylesheet" media="print"
	  href="libraries/frameworks/shower/themes/ribbon/styles/print.css">
	<link rel="stylesheet" href="libraries/highlighters/highlight.js/css/tomorrow.css">  <link rel="stylesheet" href = "assets/css/mystyle.css">
<link rel="stylesheet" href = "assets/css/ribbons.css">

	<!--
		To apply styles to the certain slides
		use slide ID to get needed elements
		-->
	<style>
		#Cover h2 {
      margin:65px 0 0;
			color:#FFF;
			text-align:center;
			font-size:70px;
			}
		#FitToWidth h2,
		#FitToHeight h2 {
			color:#FFF;
			text-align:center;
			}
	</style> 
</head>
<body class="list">
  <header class="caption">
  	<h1>Class12</h1>
	</header>
  <section class="slide " id="toc">
  <div>
    <h2>Class12</h2>
    <ul>
<li><a href="#set-up">Set up</a></li>
<li><a href="#big">Big data set</a></li>
<li><a href="#sparse">Sparse matrix</a></li>
<li><a href="#featureselection">Feature selection</a></li>
<li><a href="#freq">Frequent patterns</a></li>
</ul>

  </div>
</section>
<section class="slide modal" id="set-up">
  <div>
    <h2>Install R packages</h2>
    <pre><code class="r">## this tutorial uses the following packages
install.packages(&#39;sqldf&#39;)
</code></pre>

  </div>
</section>
<section class="slide scode-nowrap compact" id="big">
  <div>
    <h2>Big data set</h2>
    <ul>
<li>When dealing with big data files, do not read everything into memory.</li>
<li>We use the sample data from: <a href="http://grouplens.org/datasets/hetrec-2011/">http://grouplens.org/datasets/hetrec-2011/</a></li>
<li>See: <a href="http://files.grouplens.org/datasets/hetrec2011/hetrec2011-movielens-readme.txt">http://files.grouplens.org/datasets/hetrec2011/hetrec2011-movielens-readme.txt</a></li>
</ul>

<pre><code class="r">## give the input filename
data.path = &#39;hetrec2011&#39;
ifilename = sprintf(&#39;%s/movies.dat&#39;,data.path)
## read the first n=3 lines
lines = readLines(ifilename,n=3)
lines
</code></pre>

<pre><code>## [1] &quot;id\ttitle\timdbID\tspanishTitle\timdbPictureURL\tyear\trtID\trtAllCriticsRating\trtAllCriticsNumReviews\trtAllCriticsNumFresh\trtAllCriticsNumRotten\trtAllCriticsScore\trtTopCriticsRating\trtTopCriticsNumReviews\trtTopCriticsNumFresh\trtTopCriticsNumRotten\trtTopCriticsScore\trtAudienceRating\trtAudienceNumRatings\trtAudienceScore\trtPictureURL&quot;
## [2] &quot;1\tToy story\t0114709\tToy story (juguetes)\thttp://ia.media-imdb.com/images/M/MV5BMTMwNDU0NTY2Nl5BMl5BanBnXkFtZTcwOTUxOTM5Mw@@._V1._SX214_CR0,0,214,314_.jpg\t1995\ttoy_story\t9\t73\t73\t0\t100\t8.5\t17\t17\t0\t100\t3.7\t102338\t81\thttp://content7.flixster.com/movie/10/93/63/10936393_det.jpg&quot;                                                     
## [3] &quot;2\tJumanji\t0113497\tJumanji\thttp://ia.media-imdb.com/images/M/MV5BMzM5NjE1OTMxNV5BMl5BanBnXkFtZTcwNDY2MzEzMQ@@._V1._SY314_CR3,0,214,314_.jpg\t1995\t1068044-jumanji\t5.6\t28\t13\t15\t46\t5.8\t5\t2\t3\t40\t3.2\t44587\t61\thttp://content8.flixster.com/movie/56/79/73/5679734_det.jpg&quot;
</code></pre>

  </div>
</section>
<section class="slide ssscode-nowrap compact" id="slide-4">
  <div>
    <h2>Big data set</h2>
    <pre><code class="r">## read the first 3 rows into a data.frame object
df = read.csv(ifilename, sep=&#39;\t&#39;, nrows=3) ## we saw from the first few lines that the field separator is &lt;TAB&gt;
df
</code></pre>

<pre><code>##   id          title imdbID           spanishTitle
## 1  1      Toy story 114709   Toy story (juguetes)
## 2  2        Jumanji 113497                Jumanji
## 3  3 Grumpy Old Men 107050 Dos viejos gru\xf1ones
##                                                                                                     imdbPictureURL
## 1 http://ia.media-imdb.com/images/M/MV5BMTMwNDU0NTY2Nl5BMl5BanBnXkFtZTcwOTUxOTM5Mw@@._V1._SX214_CR0,0,214,314_.jpg
## 2 http://ia.media-imdb.com/images/M/MV5BMzM5NjE1OTMxNV5BMl5BanBnXkFtZTcwNDY2MzEzMQ@@._V1._SY314_CR3,0,214,314_.jpg
## 3     http://ia.media-imdb.com/images/M/MV5BMTI5MTgyMzE0OF5BMl5BanBnXkFtZTYwNzAyNjg5._V1._SX214_CR0,0,214,314_.jpg
##   year            rtID rtAllCriticsRating rtAllCriticsNumReviews
## 1 1995       toy_story                9.0                     73
## 2 1995 1068044-jumanji                5.6                     28
## 3 1993  grumpy_old_men                5.9                     36
##   rtAllCriticsNumFresh rtAllCriticsNumRotten rtAllCriticsScore
## 1                   73                     0               100
## 2                   13                    15                46
## 3                   24                    12                66
##   rtTopCriticsRating rtTopCriticsNumReviews rtTopCriticsNumFresh
## 1                8.5                     17                   17
## 2                5.8                      5                    2
## 3                7.0                      6                    5
##   rtTopCriticsNumRotten rtTopCriticsScore rtAudienceRating
## 1                     0               100              3.7
## 2                     3                40              3.2
## 3                     1                83              3.2
##   rtAudienceNumRatings rtAudienceScore
## 1               102338              81
## 2                44587              61
## 3                10489              66
##                                                   rtPictureURL
## 1 http://content7.flixster.com/movie/10/93/63/10936393_det.jpg
## 2  http://content8.flixster.com/movie/56/79/73/5679734_det.jpg
## 3      http://content6.flixster.com/movie/25/60/256020_det.jpg
</code></pre>

  </div>
</section>
<section class="slide ssscode-nowrap compact" id="slide-5">
  <div>
    <h2>Big data set</h2>
    <pre><code class="r">## read row 101--103
df = read.csv(ifilename, sep=&#39;\t&#39;, nrows=3, skip=101, header=F) ## if we set &#39;header=T&#39;, the first non-skip row will be treated as header (which is incorrect)
df
</code></pre>

<pre><code>##    V1                            V2     V3                      V4
## 1 103                 Unforgettable 118040 Escondido en la memoria
## 2 104                 Happy Gilmore 116483             Terminagolf
## 3 105 The Bridges of Madison County 112579  Los puentes de Madison
##                                                                                                                 V5
## 1 http://ia.media-imdb.com/images/M/MV5BNDM1MDg5MzY4OV5BMl5BanBnXkFtZTcwMDM5NjgyMQ@@._V1._SY314_CR2,0,214,314_.jpg
## 2 http://ia.media-imdb.com/images/M/MV5BMjE1MzgxNjIyN15BMl5BanBnXkFtZTcwMjkzMjYyMQ@@._V1._SY314_CR6,0,214,314_.jpg
## 3 http://ia.media-imdb.com/images/M/MV5BMTQ5NzcyODM1Ml5BMl5BanBnXkFtZTcwODQwMDQyMQ@@._V1._SY314_CR6,0,214,314_.jpg
##     V6                        V7  V8 V9 V10 V11 V12 V13 V14 V15 V16 V17
## 1 1996             unforgettable 4.4 26   6  20  23 0.0   4   0   4   0
## 2 1996             happy_gilmore 5.5 50  29  21  58 5.1  11   4   7  36
## 3 1995 bridges_of_madison_county 7.2 40  36   4  90 7.9   9   9   0 100
##   V18    V19 V20
## 1 3.0    358  36
## 2 3.7 114875  83
## 3 3.6  11573  83
##                                                            V21
## 1 http://content8.flixster.com/movie/11/13/35/11133586_det.jpg
## 2      http://content7.flixster.com/movie/25/96/259613_det.jpg
## 3 http://content6.flixster.com/movie/10/92/73/10927328_det.jpg
</code></pre>

  </div>
</section>
<section class="slide scode-nowrap compact" id="slide-6">
  <div>
    <h2>Big data set</h2>
    <pre><code class="r">## count how many lines in the file
# length(readLines(ifilename)) ## not recommended because it reads the file in memory
system(sprintf(&quot;wc -l %s&quot;,ifilename), intern=T ) 
</code></pre>

<pre><code>## [1] &quot;10198 hetrec2011/movies.dat&quot;
</code></pre>

<pre><code class="r">## you can use &#39;wc&#39; command on unix-based machine (linux, mac, etc.)

suppressWarnings(suppressPackageStartupMessages( ## avoid printing warnings
  require(R.utils)
)) ## assumig you have installed R.utils
countLines(ifilename)
</code></pre>

<pre><code>## [1] 10198
## attr(,&quot;lastLineHasNewline&quot;)
## [1] TRUE
</code></pre>

<pre><code class="r">suppressWarnings(suppressPackageStartupMessages( ## avoid printing warnings
  require(sqldf)
)) ## assumig you have installed sqldf
read.csv.sql(ifilename, &quot;select count(*) from file&quot;, sep=&#39;\t&#39;)
</code></pre>

<pre><code>## Error in read.csv.sql(ifilename, &quot;select count(*) from file&quot;, sep = &quot;\t&quot;): could not find function &quot;read.csv.sql&quot;
</code></pre>

  </div>
</section>
<section class="slide scode-nowrap compact" id="slide-7">
  <div>
    <h2>Big data set</h2>
    <pre><code class="r">sql = &#39;select id,title,year from file limit 1&#39; ## read 1 row
df = read.csv.sql(ifilename, sql, sep=&#39;\t&#39;)
</code></pre>

<pre><code>## Error in read.csv.sql(ifilename, sql, sep = &quot;\t&quot;): could not find function &quot;read.csv.sql&quot;
</code></pre>

<pre><code class="r">df
</code></pre>

<pre><code>##    V1                            V2     V3                      V4
## 1 103                 Unforgettable 118040 Escondido en la memoria
## 2 104                 Happy Gilmore 116483             Terminagolf
## 3 105 The Bridges of Madison County 112579  Los puentes de Madison
##                                                                                                                 V5
## 1 http://ia.media-imdb.com/images/M/MV5BNDM1MDg5MzY4OV5BMl5BanBnXkFtZTcwMDM5NjgyMQ@@._V1._SY314_CR2,0,214,314_.jpg
## 2 http://ia.media-imdb.com/images/M/MV5BMjE1MzgxNjIyN15BMl5BanBnXkFtZTcwMjkzMjYyMQ@@._V1._SY314_CR6,0,214,314_.jpg
## 3 http://ia.media-imdb.com/images/M/MV5BMTQ5NzcyODM1Ml5BMl5BanBnXkFtZTcwODQwMDQyMQ@@._V1._SY314_CR6,0,214,314_.jpg
##     V6                        V7  V8 V9 V10 V11 V12 V13 V14 V15 V16 V17
## 1 1996             unforgettable 4.4 26   6  20  23 0.0   4   0   4   0
## 2 1996             happy_gilmore 5.5 50  29  21  58 5.1  11   4   7  36
## 3 1995 bridges_of_madison_county 7.2 40  36   4  90 7.9   9   9   0 100
##   V18    V19 V20
## 1 3.0    358  36
## 2 3.7 114875  83
## 3 3.6  11573  83
##                                                            V21
## 1 http://content8.flixster.com/movie/11/13/35/11133586_det.jpg
## 2      http://content7.flixster.com/movie/25/96/259613_det.jpg
## 3 http://content6.flixster.com/movie/10/92/73/10927328_det.jpg
</code></pre>

  </div>
</section>
<section class="slide scode-nowrap compact" id="slide-8">
  <div>
    <h2>Big data set</h2>
    <pre><code class="r">sql = &#39;select id,title,year from file limit 10&#39; ## read 10 rows
df = read.csv.sql(ifilename, sql, sep=&#39;\t&#39;)
</code></pre>

<pre><code>## Error in read.csv.sql(ifilename, sql, sep = &quot;\t&quot;): could not find function &quot;read.csv.sql&quot;
</code></pre>

<pre><code class="r">df
</code></pre>

<pre><code>##    V1                            V2     V3                      V4
## 1 103                 Unforgettable 118040 Escondido en la memoria
## 2 104                 Happy Gilmore 116483             Terminagolf
## 3 105 The Bridges of Madison County 112579  Los puentes de Madison
##                                                                                                                 V5
## 1 http://ia.media-imdb.com/images/M/MV5BNDM1MDg5MzY4OV5BMl5BanBnXkFtZTcwMDM5NjgyMQ@@._V1._SY314_CR2,0,214,314_.jpg
## 2 http://ia.media-imdb.com/images/M/MV5BMjE1MzgxNjIyN15BMl5BanBnXkFtZTcwMjkzMjYyMQ@@._V1._SY314_CR6,0,214,314_.jpg
## 3 http://ia.media-imdb.com/images/M/MV5BMTQ5NzcyODM1Ml5BMl5BanBnXkFtZTcwODQwMDQyMQ@@._V1._SY314_CR6,0,214,314_.jpg
##     V6                        V7  V8 V9 V10 V11 V12 V13 V14 V15 V16 V17
## 1 1996             unforgettable 4.4 26   6  20  23 0.0   4   0   4   0
## 2 1996             happy_gilmore 5.5 50  29  21  58 5.1  11   4   7  36
## 3 1995 bridges_of_madison_county 7.2 40  36   4  90 7.9   9   9   0 100
##   V18    V19 V20
## 1 3.0    358  36
## 2 3.7 114875  83
## 3 3.6  11573  83
##                                                            V21
## 1 http://content8.flixster.com/movie/11/13/35/11133586_det.jpg
## 2      http://content7.flixster.com/movie/25/96/259613_det.jpg
## 3 http://content6.flixster.com/movie/10/92/73/10927328_det.jpg
</code></pre>

  </div>
</section>
<section class="slide scode-nowrap compact" id="slide-9">
  <div>
    <h2>Big data set</h2>
    <pre><code class="r">sql = &#39;select id,title,year from file limit 5,10&#39; ## skip the first 5 rows, and read the next 10 rows
df = read.csv.sql(ifilename, sql, sep=&#39;\t&#39;)
</code></pre>

<pre><code>## Error in read.csv.sql(ifilename, sql, sep = &quot;\t&quot;): could not find function &quot;read.csv.sql&quot;
</code></pre>

<pre><code class="r">df
</code></pre>

<pre><code>##    V1                            V2     V3                      V4
## 1 103                 Unforgettable 118040 Escondido en la memoria
## 2 104                 Happy Gilmore 116483             Terminagolf
## 3 105 The Bridges of Madison County 112579  Los puentes de Madison
##                                                                                                                 V5
## 1 http://ia.media-imdb.com/images/M/MV5BNDM1MDg5MzY4OV5BMl5BanBnXkFtZTcwMDM5NjgyMQ@@._V1._SY314_CR2,0,214,314_.jpg
## 2 http://ia.media-imdb.com/images/M/MV5BMjE1MzgxNjIyN15BMl5BanBnXkFtZTcwMjkzMjYyMQ@@._V1._SY314_CR6,0,214,314_.jpg
## 3 http://ia.media-imdb.com/images/M/MV5BMTQ5NzcyODM1Ml5BMl5BanBnXkFtZTcwODQwMDQyMQ@@._V1._SY314_CR6,0,214,314_.jpg
##     V6                        V7  V8 V9 V10 V11 V12 V13 V14 V15 V16 V17
## 1 1996             unforgettable 4.4 26   6  20  23 0.0   4   0   4   0
## 2 1996             happy_gilmore 5.5 50  29  21  58 5.1  11   4   7  36
## 3 1995 bridges_of_madison_county 7.2 40  36   4  90 7.9   9   9   0 100
##   V18    V19 V20
## 1 3.0    358  36
## 2 3.7 114875  83
## 3 3.6  11573  83
##                                                            V21
## 1 http://content8.flixster.com/movie/11/13/35/11133586_det.jpg
## 2      http://content7.flixster.com/movie/25/96/259613_det.jpg
## 3 http://content6.flixster.com/movie/10/92/73/10927328_det.jpg
</code></pre>

  </div>
</section>
<section class="slide scode-nowrap compact" id="slide-10">
  <div>
    <h2>Big data set</h2>
    <pre><code class="r">sql = &#39;select year,count(*) from file group by year limit 10&#39; ## you can do more if you are familiar with SQL 
df = read.csv.sql(ifilename, sql, sep=&#39;\t&#39;)
</code></pre>

<pre><code>## Error in read.csv.sql(ifilename, sql, sep = &quot;\t&quot;): could not find function &quot;read.csv.sql&quot;
</code></pre>

<pre><code class="r">df
</code></pre>

<pre><code>##    V1                            V2     V3                      V4
## 1 103                 Unforgettable 118040 Escondido en la memoria
## 2 104                 Happy Gilmore 116483             Terminagolf
## 3 105 The Bridges of Madison County 112579  Los puentes de Madison
##                                                                                                                 V5
## 1 http://ia.media-imdb.com/images/M/MV5BNDM1MDg5MzY4OV5BMl5BanBnXkFtZTcwMDM5NjgyMQ@@._V1._SY314_CR2,0,214,314_.jpg
## 2 http://ia.media-imdb.com/images/M/MV5BMjE1MzgxNjIyN15BMl5BanBnXkFtZTcwMjkzMjYyMQ@@._V1._SY314_CR6,0,214,314_.jpg
## 3 http://ia.media-imdb.com/images/M/MV5BMTQ5NzcyODM1Ml5BMl5BanBnXkFtZTcwODQwMDQyMQ@@._V1._SY314_CR6,0,214,314_.jpg
##     V6                        V7  V8 V9 V10 V11 V12 V13 V14 V15 V16 V17
## 1 1996             unforgettable 4.4 26   6  20  23 0.0   4   0   4   0
## 2 1996             happy_gilmore 5.5 50  29  21  58 5.1  11   4   7  36
## 3 1995 bridges_of_madison_county 7.2 40  36   4  90 7.9   9   9   0 100
##   V18    V19 V20
## 1 3.0    358  36
## 2 3.7 114875  83
## 3 3.6  11573  83
##                                                            V21
## 1 http://content8.flixster.com/movie/11/13/35/11133586_det.jpg
## 2      http://content7.flixster.com/movie/25/96/259613_det.jpg
## 3 http://content6.flixster.com/movie/10/92/73/10927328_det.jpg
</code></pre>

<ul>
<li>if you have mysql database, you can use &#39;RMySQL&#39; package.</li>
<li>Other tips (using &#39;fread&#39;): <a href="http://davetang.org/muse/2013/09/03/handling-big-data-in-r/">http://davetang.org/muse/2013/09/03/handling-big-data-in-r/</a></li>
</ul>

  </div>
</section>
<section class="slide scode-nowrap compact" id="slide-11">
  <div>
    <h2>Sparse matrix</h2>
    
  </div>
</section>
<section class="slide scode-nowrap compact" id="slide-12">
  <div>
    <h2>Sparse matrix</h2>
    
  </div>
</section>
  <div class="progress">
    <div></div>
  </div>
    <footer class = 'foot'>
      <a href="index.html"><img src = 'assets/img/arrow_up_circle.png' style="width:30px;height:30px;"></a></img>
      <a href="#toc"><img src = 'assets/img/circle-info.png' style="width:32px;height:32px;"></a></img>
    </footer>    
	<script src="libraries/frameworks/shower/shower.js"></script>
	<!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
	<script type="text/x-mathjax-config">
	  MathJax.Hub.Config({
	    tex2jax: {
	      inlineMath: [['$','$'], ['\\(','\\)']],
	      processEscapes: true
	    }
	  });
	</script>
	<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
	<!-- <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
	</script> -->
	<script>window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="libraries/widgets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><\/script>')
</script>
<!-- LOAD HIGHLIGHTER JS FILES -->
	<script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
	<!-- DONE LOADING HIGHLIGHTER JS FILES -->
	 
		<!-- Copyright © 2010–2012 Vadim Makeev — pepelsbey.net -->
	<!-- Photos by John Carey — fiftyfootshadows.net -->
</body>
</html>